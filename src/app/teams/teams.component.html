<main class="teams-shell">
  <header class="teams-topbar">
    <div>
      <p class="eyebrow">Teams</p>
      <h1>Organization teams</h1>
      <p class="subtitle">Track structure, headcount, and coverage by team.</p>
    </div>
    <div class="actions">
      <a class="ghost button-link" routerLink="/">Back to home</a>
    </div>
  </header>

  <section class="teams-grid">
    @for (team of teams; track team.name) {
      <article class="panel">
        <div class="panel-header">
          <h2>{{ team.name }}</h2>
          <span class="pill" [class.soft]="team.people < 100"
            >{{ team.people }} people</span
          >
        </div>
        <p>{{ team.summary }}</p>
        <div class="team-meta">
          <div>
            <span class="label">Manager</span>
            <span class="value">{{ team.head }}</span>
          </div>
          <div>
            <span class="label">Coverage</span>
            <span class="value">{{ team.coverage }}</span>
          </div>
          <div>
            <span class="label">Sites</span>
            <span class="value">{{ team.sites }}</span>
          </div>
        </div>
        <button class="ghost full" type="button" (click)="openRoster(team.name)"
          >View roster</button
        >
      </article>
    }
  </section>
</main>

@if (selectedTeam) {
  <div class="modal-backdrop" (click)="closeRoster()"></div>
  <div class="modal" role="dialog" aria-modal="true">
    <header>
      <div>
        <p class="eyebrow">Team roster</p>
        <h3>{{ selectedTeam.name }}</h3>
        <p class="subtitle">Head: {{ selectedTeam.head }}</p>
      </div>
      <button class="ghost" type="button" (click)="closeRoster()">Close</button>
    </header>
    <div class="modal-body">
      @if (selectedTeam.roster.length) {
        @for (member of selectedTeam.roster; track member.name) {
          <div class="member-row">
            <div>
              <strong>{{ member.name }}</strong>
              <span>{{ member.role }}</span>
            </div>
            <span class="pill soft">{{ member.location }}</span>
          </div>
        }
      } @else {
        <p class="empty">No team members added yet.</p>
      }
    </div>
  </div>
}
