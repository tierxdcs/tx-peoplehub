<main class="directory-shell">
  <header class="directory-topbar">
    <div>
      <p class="eyebrow">People directory</p>
      <h1>Find employees fast</h1>
      <p class="subtitle">
        Search active employees, view roles, and jump to profiles.
      </p>
    </div>
    <div class="actions">
      <a class="ghost button-link" routerLink="/">Back to home</a>
    </div>
  </header>

  <section class="directory-controls">
    <div class="search">
      <span>Search</span>
      <input
        type="text"
        placeholder="Name, team, or role"
        [(ngModel)]="search"
      />
    </div>
    <div class="filters">
      <label>
        Department
        <select [(ngModel)]="selectedDepartment">
          <option>All departments</option>
          @for (department of departments; track department.id) {
            <option>{{ department.name }}</option>
          }
        </select>
      </label>
      <label>
        Status
        <select [(ngModel)]="selectedStatus" disabled>
          <option>Active</option>
        </select>
      </label>
    </div>
  </section>

  <section class="directory-list">
    @for (person of filteredPeople; track person.id) {
      <article class="person-card">
        <div class="card-header">
          <div class="avatar">
            <span>{{ getInitials(person.name) }}</span>
            <span class="status-dot" [class.active]="person.status === 'Active'"></span>
          </div>
          <div class="title">
            <strong>{{ person.name }}</strong>
            <span>{{ person.role }}</span>
          </div>
        </div>
        <div class="card-meta">
          <span>Employee ID: {{ person.employeeId || 'Not set' }}</span>
          <span>{{ person.email || 'Not set' }}</span>
          <span class="pill">{{ person.department }}</span>
          <span class="pill soft">{{ person.status }}</span>
        </div>
        <a
          class="ghost button-link"
          [routerLink]="['/people', person.id]"
          [queryParams]="{ from: 'directory' }"
          (click)="markDirectoryNavigation()"
        >
          View profile
        </a>
      </article>
    }
  </section>
  @if (hasMore) {
    <div class="load-more">
      <button class="ghost" type="button" (click)="loadMore()" [disabled]="isLoadingMore">
        {{ isLoadingMore ? 'Loadingâ€¦' : 'Load more' }}
      </button>
    </div>
  }
</main>
